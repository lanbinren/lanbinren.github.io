---
title: First Test
---
> 

SPI（Serial Peripheral Interface）总线是主要应用于嵌入式系统内部通信的串行同步传输总线协议。通常为四线制的SPI总线支持全双工通信。SPI最初由Motorola在2000年提出，Motorola所定义的SPI标准为业界广泛引用，但不同半导体公司的实施细节可能有所不同，这些区别体现在寄存器设置、信号定义、数据格式等。业界没有统一的SPI标准，具体应用需要参考特定器件手册。

SPI协议特点包括主从模式、全双工通信、片选功能、模式错误标识及CPU中断、缓冲数据寄存器和可配置时钟相位极性等。SPI允许数据一位一位的传送，甚至允许暂停，因为SCK时钟线由主控设备控制，当没有时钟跳变时，从设备不采集或传送数据。也就是说，主设备通过对SCK时钟线的控制可以完成对通讯的控制。

应用
SPI以其简单高效应用于绝大多数SoC系统上，这些SoC通常同时支持作为主模式或从模式（二选一）。

FPGAs和其它专用芯片也广泛使用SPI传输数据。比如：

. 传感器：温度、压力传感器等
. 控制设备：音频编解码器等
. 通信设备：USB、以太网设备等
. 存储器：Flash、EEPROM等
. RTC时钟
. LCD设备
. MMC和SD卡

在高性能系统中，FPGAs通常使用SPI连接主从设备，比如连接外部传感器，和应用SPI加载配置。相比于JTAG，SPI定位用于高速配置（初始化）板上设备；而JTAG的初衷是为控制设备以相对低的准确度扫描和检测板上IO，在严格要求的场合，JTAG协议支持改变时钟占空比以满足建立和保持时间的要求。因此，JTAG并不定位于高速数据传输的场合。

优点和缺点

优点
支持全双工通信
Push-Pull驱动性能相比Open Drain信号完整性更好，支持高速应用（100MHz以上）
协议支持字长不限于8bits，可根据应用特点灵活选择消息字长
硬件连接简单

. 只需要四根信号线（部分应用可以缩减到三根）
. 相比I2C和SMbus节省上拉电阻
. 相比I2C和SMbus不需要仲裁机制
. 从设备使用主设备时钟，节约时钟要求
. 从设备无需地址寻址
. 无需收发器

缺点
相比I2C两根线，SPI四根线更多
没有寻址机制，只能靠设备片选（chip select）选择不同从设备
没有数据流控制（但主设备可以通过延缓时钟边缘降低传输速度）
没有从设备接收数据ACK，主设备对于发送成功与否不得而知
典型应用只支持单主控
没有定义数据校验机制
没有统一的国际组织维护，变种多不利于不同厂商设备的互操作性（interoperability）
相比于RS232、RS422、RS485和CAN，SPI传输距离短
不支持热插拔
中断操作只能通过额外的信号线，或类似USB 1.1 and 2.0的Periodic Polling实现